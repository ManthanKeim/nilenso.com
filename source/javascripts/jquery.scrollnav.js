// Generated by CoffeeScript 1.3.3
(function() {
  var ScrollNavigation,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  ScrollNavigation = (function() {

    function ScrollNavigation(config) {
      this.config = config;
      this.deSelectScrollNavSection = __bind(this.deSelectScrollNavSection, this);

      this.selectScrollNavSection = __bind(this.selectScrollNavSection, this);

      this.bindEvents = __bind(this.bindEvents, this);

      this.setNavItemHeight = __bind(this.setNavItemHeight, this);

      this.setupConfig = __bind(this.setupConfig, this);

      this.setupConfig();
      this.numberOfNavItems = $("[data-section]").length;
      if (this.numberOfNavItems < 1) {
        return false;
      }
      this.setNavItemHeight();
      this.bindEvents();
    }

    ScrollNavigation.prototype.setupConfig = function() {
      return this.config = jQuery.extend({
        pageSectionSelector: ".navigable-section",
        viewportOffsetTop: 0,
        viewportOffsetHeight: 0
      }, this.config);
    };

    ScrollNavigation.prototype.setNavItemHeight = function() {
      var navHeight;
      navHeight = $(".scroll-nav").height();
      return $(".scroll-nav-section").height(navHeight / this.numberOfNavItems);
    };

    ScrollNavigation.prototype.bindEvents = function() {
      return $(this.config.pageSectionSelector).bind("enterviewport", this.selectScrollNavSection).bind("leaveviewport", this.deSelectScrollNavSection).bullseye({
        offsetTop: this.config.viewportOffsetTop,
        offsetHeight: this.config.viewportOffsetHeight
      });
    };

    ScrollNavigation.prototype.selectScrollNavSection = function(event) {
      var activeSection;
      activeSection = $(event.target).data("section");
      return $(".scroll-nav-section[data-nav='" + activeSection + "']").addClass("selected");
    };

    ScrollNavigation.prototype.deSelectScrollNavSection = function(event) {
      var inactiveSection;
      inactiveSection = $(event.target).data("section");
      return $(".scroll-nav-section[data-nav='" + inactiveSection + "']").removeClass("selected");
    };

    return ScrollNavigation;

  })();

  window.ScrollNavigation = ScrollNavigation;

}).call(this);
